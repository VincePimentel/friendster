<% if posts.size > 0 %>
  <% posts.each do |post| %>

    <% next if post.nil? %>

      <div class="card mb-3">

        <div class="card-header">

          <% if current_user.id == post.user.id %>
            <%= link_to post.user.full_name, user_path(post.user) %> <%= icon("fas", "caret-right") %> <%= link_to User.find(post.recipient_id).full_name, user_path(post.recipient_id) %> <!-- helper me -->
            <span class="float-right">
              <%= link_to icon("fas", "edit"),
                edit_user_post_path(current_user, post) %>
              <%= link_to icon("fas", "trash"),
                user_post_path(current_user, post),
                method: :delete,
                data: { confirm: "Are you sure?" } %>
            </span>
          <% else %>
            <%= link_to post.user.full_name, user_path(post.user) %>
          <% end %>

          <br>

          <small class="text-muted" data-toggle="tooltip" data-placement="right" title="<%= time_ago_in_words(post.created_at) %> ago">
            <%= post.created_at.localtime.strftime("%A, %d %b %Y %l:%M %p") %>
          </small>
        </div> <!-- card-header -->

        <div class="card-body">
          <%= post.content %>

          <% if !post.link.empty? %>
            <!-- Add check to make sure image is an image -->
            <%= image_tag post.link, class: "img-fluid" %>
          <% end %>
        </div>

        <div class="card-footer text-muted px-1 py-1">
          <%= render partial: "comments/form",
            locals: {
              post: post,
              comment: comment
            } %>
        </div> <!-- card-footer -->

      </div> <!-- card mb-3 -->

  <% end %>
<% else %>
  <p>Nothing to see here!</p>
<% end %>
